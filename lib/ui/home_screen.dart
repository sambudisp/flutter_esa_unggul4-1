import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:intl/intl.dart';import 'package:movie_db/core/model/movie_resp.dart';import 'package:movie_db/core/model/movie_response.dart';import 'package:movie_db/core/model/movie_results.dart';import 'package:movie_db/core/service.dart';class HomeScreen extends StatefulWidget {  @override  _HomeScreenState createState() => _HomeScreenState();}class _HomeScreenState extends State<HomeScreen> with TickerProviderStateMixin{  List<Tab> tabList = List();  TabController _tabController;  Service _service;  var imageUrl = 'http://image.tmdb.org/t/p/w500';  @override  void initState() {    super.initState();    print('init HomeScreen');    _service = Service();    tabList.add(new Tab(      text: 'Now Playing',    ));    tabList.add(new Tab(      text: 'Upcoming',    ));    _tabController = new TabController(vsync: this, length: tabList.length);  }  @override  void dispose() {    // TODO: implement dispose    super.dispose();    _tabController.dispose();  }  @override  Widget build(BuildContext context) {    return SafeArea(child: Scaffold(      backgroundColor: Colors.white70,      appBar: AppBar(        title: Text('Movie Apps'),        bottom: TabBar(            controller: _tabController,            indicatorColor: Colors.green,            indicatorSize: TabBarIndicatorSize.tab,            tabs: tabList),      ),      body: TabBarView(        controller: _tabController,        children: <Widget>[          FutureBuilder<MovieResponse>(              future: _service.getNowPlaying(),              builder: (context, snapshot) {                if (snapshot.hasData) {                  return ListView.builder(                    itemCount: snapshot.data.results.length,                    itemBuilder: (context, index) {                      ///Tambahin ini                      var data = snapshot.data.results[index];                      if (snapshot.data.results == null) {                        return Text('Tidak ada Data ');                      } else {                        return Stack(                          children: <Widget>[                            Padding(                              padding: const EdgeInsets.all(8.0),                              child: Row(                                mainAxisSize: MainAxisSize.max,                                children: <Widget>[                                  Spacer(),                                  Expanded(                                    flex: 5,                                    child: Container(                                        height: 120,                                        decoration: BoxDecoration(                                            color: Colors.white,                                            borderRadius: BorderRadius.all(                                                Radius.circular(8))),                                        child: Padding(                                          padding: const EdgeInsets.all(8.0),                                          child: Padding(                                            padding:                                            const EdgeInsets.only(left: 24.0),                                            child: Column(                                              crossAxisAlignment:                                              CrossAxisAlignment.start,                                              mainAxisSize: MainAxisSize.max,                                              children: <Widget>[                                                SizedBox(                                                  height: 10,                                                ),                                                Row(                                                  mainAxisSize: MainAxisSize.max,                                                  children: <Widget>[                                                    SizedBox(                                                      width: 20,                                                    ),                                                    Expanded(                                                        flex: 4,                                                        child: Container(//                                                        color: Colors.lightBlue,                                                            child: ListTile(                                                              title: Text(                                                                data.originalTitle,                                                                style: TextStyle(                                                                    fontWeight:                                                                    FontWeight.bold,                                                                    fontSize: 20),                                                              ),                                                              subtitle: Text(                                                                DateFormat(                                                                    'dd MMM yyyy')                                                                    .format(DateTime                                                                    .parse(data                                                                    .releaseDate                                                                    .toString())),                                                              ),                                                            ))),                                                    Expanded(                                                        child: Container(                                                            color: Colors.black,                                                            child: SizedBox()))                                                  ],                                                ),                                              ],                                            ),                                          ),                                        )),                                  ),                                  SizedBox(                                    width: 15,                                  ),                                ],                              ),                            ),                            Positioned(                              left: 20,                              top: 20,                              child: Container(                                  decoration: BoxDecoration(                                    shape: BoxShape.circle,                                    color: Colors.white,                                  ),                                  child: Padding(                                    padding: const EdgeInsets.all(8.0),                                    child: CircleAvatar(                                        radius: 40.0,                                        backgroundImage: snapshot.data                                            .results[index].posterPath !=                                            null                                            ? NetworkImage(                                            imageUrl + data.posterPath)                                            : NetworkImage(                                            'http://lequytong.com/Content/Images/no-image-02.png')),                                  )),                            ),                            Positioned(                              top: 40,                              right: 5,                              child: Container(                                width: 50,                                height: 50,                                decoration: BoxDecoration(                                  borderRadius:                                  BorderRadius.all(Radius.circular(10)),//                                shape: BoxShape.circle,                                  color: Colors.grey,//                                boxShadow: [//                                  BoxShadow(//                                    color: Colors.lightBlue,//                                    blurRadius: 2//                                  )//                                ]                                ),                                child: Padding(                                  padding: const EdgeInsets.all(8.0),                                  child: Container(                                      height: 50,                                      child: Icon(                                        Icons.arrow_forward_ios,                                        color: Colors.white,                                        size: 20,                                      )),                                ),                              ),                            ),                          ],                        );                      }                    },                  );                } else {                  return Center(                    child: CircularProgressIndicator(),                  );                }              }),          FutureBuilder<MovieResults>(              future: _service.getUpComing(),              builder: (context, snapshot) {                if (snapshot.hasData) {                  return ListView.builder(                    itemCount: snapshot.data.results.length,                    itemBuilder: (context, index) {                      ///Tambahin ini                      var data = snapshot.data.results[index];                      if (snapshot.data.results == null) {                        return Text('Tidak ada Data ');                      } else {                        return Stack(                          children: <Widget>[                            Padding(                              padding: const EdgeInsets.all(8.0),                              child: Row(                                mainAxisSize: MainAxisSize.max,                                children: <Widget>[                                  Spacer(),                                  Expanded(                                    flex: 5,                                    child: Container(                                        height: 120,                                        decoration: BoxDecoration(                                            color: Colors.white,                                            borderRadius: BorderRadius.all(                                                Radius.circular(8))),                                        child: Padding(                                          padding: const EdgeInsets.all(8.0),                                          child: Padding(                                            padding:                                            const EdgeInsets.only(left: 24.0),                                            child: Column(                                              crossAxisAlignment:                                              CrossAxisAlignment.start,                                              mainAxisSize: MainAxisSize.max,                                              children: <Widget>[                                                SizedBox(                                                  height: 10,                                                ),                                                Row(                                                  mainAxisSize: MainAxisSize.max,                                                  children: <Widget>[                                                    SizedBox(                                                      width: 20,                                                    ),                                                    Expanded(                                                        flex: 4,                                                        child: Container(//                                                        color: Colors.lightBlue,                                                            child: ListTile(                                                              title: Text(                                                                data.originalTitle,                                                                style: TextStyle(                                                                    fontWeight:                                                                    FontWeight.bold,                                                                    fontSize: 18),                                                              ),                                                              subtitle: Text(                                                                DateFormat(                                                                    'dd MMM yyyy')                                                                    .format(DateTime                                                                    .parse(data                                                                    .releaseDate                                                                    .toString())),                                                              ),                                                            ))),                                                    Expanded(                                                        child: Container(                                                            color: Colors.black,                                                            child: SizedBox()))                                                  ],                                                ),                                              ],                                            ),                                          ),                                        )),                                  ),                                  SizedBox(                                    width: 15,                                  ),                                ],                              ),                            ),                            Positioned(                              left: 20,                              top: 20,                              child: Container(                                  decoration: BoxDecoration(                                    shape: BoxShape.circle,                                    color: Colors.white,                                  ),                                  child: Padding(                                    padding: const EdgeInsets.all(8.0),                                    child: CircleAvatar(                                        radius: 40.0,                                        backgroundImage: snapshot.data                                            .results[index].posterPath !=                                            null                                            ? NetworkImage(                                            imageUrl + data.posterPath)                                            : NetworkImage(                                            'http://lequytong.com/Content/Images/no-image-02.png')),                                  )),                            ),                            Positioned(                              top: 40,                              right: 5,                              child: Container(                                width: 50,                                height: 50,                                decoration: BoxDecoration(                                  borderRadius:                                  BorderRadius.all(Radius.circular(10)),//                                shape: BoxShape.circle,                                  color: Colors.grey,//                                boxShadow: [//                                  BoxShadow(//                                    color: Colors.lightBlue,//                                    blurRadius: 2//                                  )//                                ]                                ),                                child: Padding(                                  padding: const EdgeInsets.all(8.0),                                  child: Container(                                      height: 50,                                      child: Icon(                                        Icons.arrow_forward_ios,                                        color: Colors.white,                                        size: 20,                                      )),                                ),                              ),                            ),                          ],                        );                      }                    },                  );                } else {                  return Center(                    child: CircularProgressIndicator(),                  );                }              }),        ],      )    ));  }}